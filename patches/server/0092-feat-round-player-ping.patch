From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: ruViolence <78062896+ruViolence@users.noreply.github.com>
Date: Fri, 10 Jun 2022 16:06:05 +0500
Subject: [PATCH] feat: round player ping

Helps to hide the real ping from cheat clients.

diff --git a/src/main/java/this/core/lamius/Lamius/LamiusConfig.java b/src/main/java/this/core/lamius/Lamius/LamiusConfig.java
index 0d8e94d70d4150c8fd43d587e301666cf8296b84..02a4c00bb4de0f989a1fc4a920925c5d9c8213f3 100644
--- a/src/main/java/this/core/lamius/Lamius/LamiusConfig.java
+++ b/src/main/java/this/core/lamius/Lamius/LamiusConfig.java
@@ -254,4 +254,9 @@ public class LamiusConfig {
     private static void relativeArrowMotion() {
         relativeArrowMotion = getBoolean("relative-arrow-motion", true);
     }
+
+    public static boolean roundPlayerPing;
+    private static void roundPlayerPing() {
+        roundPlayerPing = getBoolean("round-player-ping", false);
+    }
 }
diff --git a/src/main/java/net/minecraft/server/PacketPlayOutPlayerInfo.java b/src/main/java/net/minecraft/server/PacketPlayOutPlayerInfo.java
index d385a9c950fe3b955536b88cfc6ce8be27cdc587..f244441f879368a0d71751e6163e1d864dabb8a6 100644
--- a/src/main/java/net/minecraft/server/PacketPlayOutPlayerInfo.java
+++ b/src/main/java/net/minecraft/server/PacketPlayOutPlayerInfo.java
@@ -192,6 +192,22 @@ public class PacketPlayOutPlayerInfo implements Packet<PacketListenerPlayOut> {
         }
 
         public int b() {
+            // Lamius start
+            if (this.core.lamius.Lamius.LamiusConfig.roundPlayerPing) {
+                int ping = this.b;
+
+                if (ping < 150) {
+                    return 0;
+                } else if (ping < 300) {
+                    return 150;
+                } else if (ping < 600) {
+                    return 300;
+                } else if (ping < 1000) {
+                    return 600;
+                } else {
+                    return 1000;
+                }
+            } // Lamius end
             return this.b;
         }
 
