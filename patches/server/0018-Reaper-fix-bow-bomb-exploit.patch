From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: SoftikLord <dimap9986@gmail.com>
Date: Thu, 6 Apr 2023 15:11:22 +0500
Subject: [PATCH] Reaper-fix-bow-bomb-exploit


diff --git a/src/main/java/net/minecraft/server/EntityLiving.java b/src/main/java/net/minecraft/server/EntityLiving.java
index 35be20567b97bff939b32e5dc5e2dd49d0883a27..0a9deb9558378d8580feaac9c886403c050d1948 100644
--- a/src/main/java/net/minecraft/server/EntityLiving.java
+++ b/src/main/java/net/minecraft/server/EntityLiving.java
@@ -1708,12 +1708,24 @@ public abstract class EntityLiving extends Entity {
         return 0.42F;
     }
 
+    protected long lastJumpTime = 0L; // Reaper start - arrow velocity fix
     protected void cu() {
+        // Reaper start - arrow velocity fix
+        long time = System.nanoTime();
+        boolean canCrit = true;
+        if (this instanceof EntityPlayer) {
+            canCrit = false;
+            if (time - this.lastJumpTime > (long)(0.250e9)) {
+                this.lastJumpTime = time;
+                canCrit = true;
+            }
+        }
+        // Reaper end - arrow velocity fix
         this.motY = (double) this.ct();
         if (this.hasEffect(MobEffects.JUMP)) {
             this.motY += (double) ((float) (this.getEffect(MobEffects.JUMP).getAmplifier() + 1) * 0.1F);
         }
-
+        if (canCrit) // Reaper - arrow velocity fix
         if (this.isSprinting()) {
             float f = this.yaw * 0.017453292F;
 
